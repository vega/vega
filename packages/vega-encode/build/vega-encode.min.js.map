{"version":3,"file":"vega-encode.min.js","sources":["../src/AxisTicks.js","../src/DataJoin.js","../src/Encode.js","../src/LegendEntries.js","../src/LinkPath.js","../../../node_modules/d3-array/src/range.js","../src/Pie.js","../../../node_modules/d3-color/src/define.js","../../../node_modules/d3-color/src/color.js","../../../node_modules/d3-array/src/sum.js","../../../node_modules/d3-interpolate/src/constant.js","../../../node_modules/d3-interpolate/src/color.js","../../../node_modules/d3-interpolate/src/rgb.js","../../../node_modules/d3-interpolate/src/numberArray.js","../../../node_modules/d3-interpolate/src/array.js","../../../node_modules/d3-interpolate/src/date.js","../../../node_modules/d3-interpolate/src/number.js","../../../node_modules/d3-interpolate/src/object.js","../../../node_modules/d3-interpolate/src/string.js","../../../node_modules/d3-interpolate/src/value.js","../../../node_modules/d3-interpolate/src/round.js","../src/Scale.js","../src/SortItems.js","../src/Stack.js"],"sourcesContent":["import {Transform, ingest} from 'vega-dataflow';\nimport {tickCount, tickFormat, tickValues, validTicks} from 'vega-scale';\nimport {inherits} from 'vega-util';\n\n/**\n * Generates axis ticks for visualizing a spatial scale.\n * @constructor\n * @param {object} params - The parameters for this operator.\n * @param {Scale} params.scale - The scale to generate ticks for.\n * @param {*} [params.count=10] - The approximate number of ticks, or\n *   desired tick interval, to use.\n * @param {Array<*>} [params.values] - The exact tick values to use.\n *   These must be legal domain values for the provided scale.\n *   If provided, the count argument is ignored.\n * @param {function(*):string} [params.formatSpecifier] - A format specifier\n *   to use in conjunction with scale.tickFormat. Legal values are\n *   any valid d3 4.0 format specifier.\n * @param {function(*):string} [params.format] - The format function to use.\n *   If provided, the formatSpecifier argument is ignored.\n */\nexport default function AxisTicks(params) {\n  Transform.call(this, null, params);\n}\n\ninherits(AxisTicks, Transform, {\n  transform(_, pulse) {\n    if (this.value && !_.modified()) {\n      return pulse.StopPropagation;\n    }\n\n    var locale = pulse.dataflow.locale(),\n        out = pulse.fork(pulse.NO_SOURCE | pulse.NO_FIELDS),\n        ticks = this.value,\n        scale = _.scale,\n        tally = _.count == null ? (_.values ? _.values.length : 10) : _.count,\n        count = tickCount(scale, tally, _.minstep),\n        format = _.format || tickFormat(locale, scale, count, _.formatSpecifier, _.formatType, !!_.values),\n        values = _.values ? validTicks(scale, _.values, count) : tickValues(scale, count);\n\n    if (ticks) out.rem = ticks;\n\n    ticks = values.map((value, i) =>\n      ingest({\n        index: i / (values.length - 1 || 1),\n        value: value,\n        label: format(value)\n      })\n    );\n\n    if (_.extra && ticks.length) {\n      // add an extra tick pegged to the initial domain value\n      // this is used to generate axes with 'binned' domains\n      ticks.push(ingest({\n        index: -1,\n        extra: {value: ticks[0].value},\n        label: ''\n      }));\n    }\n\n    out.source = ticks;\n    out.add = ticks;\n    this.value = ticks;\n\n    return out;\n  }\n});\n","import {Transform, ingest, tupleid} from 'vega-dataflow';\nimport {error, fastmap, inherits, isArray} from 'vega-util';\n\n/**\n * Joins a set of data elements against a set of visual items.\n * @constructor\n * @param {object} params - The parameters for this operator.\n * @param {function(object): object} [params.item] - An item generator function.\n * @param {function(object): *} [params.key] - The key field associating data and visual items.\n */\nexport default function DataJoin(params) {\n  Transform.call(this, null, params);\n}\n\nfunction defaultItemCreate() {\n  return ingest({});\n}\n\nfunction newMap(key) {\n  const map = fastmap().test(t => t.exit);\n  map.lookup = t => map.get(key(t));\n  return map;\n}\n\ninherits(DataJoin, Transform, {\n  transform(_, pulse) {\n    var df = pulse.dataflow,\n        out = pulse.fork(pulse.NO_SOURCE | pulse.NO_FIELDS),\n        item = _.item || defaultItemCreate,\n        key = _.key || tupleid,\n        map = this.value;\n\n    // prevent transient (e.g., hover) requests from\n    // cascading across marks derived from marks\n    if (isArray(out.encode)) {\n      out.encode = null;\n    }\n\n    if (map && (_.modified('key') || pulse.modified(key))) {\n      error('DataJoin does not support modified key function or fields.');\n    }\n\n    if (!map) {\n      pulse = pulse.addAll();\n      this.value = map = newMap(key);\n    }\n\n    pulse.visit(pulse.ADD, t => {\n      const k = key(t);\n      let x = map.get(k);\n\n      if (x) {\n        if (x.exit) {\n          map.empty--;\n          out.add.push(x);\n        } else {\n          out.mod.push(x);\n        }\n      } else {\n        x = item(t);\n        map.set(k, x);\n        out.add.push(x);\n      }\n\n      x.datum = t;\n      x.exit = false;\n    });\n\n    pulse.visit(pulse.MOD, t => {\n      const k = key(t),\n            x = map.get(k);\n\n      if (x) {\n        x.datum = t;\n        out.mod.push(x);\n      }\n    });\n\n    pulse.visit(pulse.REM, t => {\n      const k = key(t),\n            x = map.get(k);\n\n      if (t === x.datum && !x.exit) {\n        out.rem.push(x);\n        x.exit = true;\n        ++map.empty;\n      }\n    });\n\n    if (pulse.changed(pulse.ADD_MOD)) out.modifies('datum');\n\n    if (pulse.clean() || _.clean && map.empty > df.cleanThreshold) {\n      df.runAfter(map.clean);\n    }\n\n    return out;\n  }\n});\n","import {Transform} from 'vega-dataflow';\nimport {falsy, inherits, isArray} from 'vega-util';\n\n/**\n * Invokes encoding functions for visual items.\n * @constructor\n * @param {object} params - The parameters to the encoding functions. This\n *   parameter object will be passed through to all invoked encoding functions.\n * @param {object} [params.mod=false] - Flag indicating if tuples in the input\n *   mod set that are unmodified by encoders should be included in the output.\n * @param {object} param.encoders - The encoding functions\n * @param {function(object, object): boolean} [param.encoders.update] - Update encoding set\n * @param {function(object, object): boolean} [param.encoders.enter] - Enter encoding set\n * @param {function(object, object): boolean} [param.encoders.exit] - Exit encoding set\n */\nexport default function Encode(params) {\n  Transform.call(this, null, params);\n}\n\ninherits(Encode, Transform, {\n  transform(_, pulse) {\n    var out = pulse.fork(pulse.ADD_REM),\n        fmod = _.mod || false,\n        encoders = _.encoders,\n        encode = pulse.encode;\n\n    // if an array, the encode directive includes additional sets\n    // that must be defined in order for the primary set to be invoked\n    // e.g., only run the update set if the hover set is defined\n    if (isArray(encode)) {\n      if (out.changed() || encode.every(e => encoders[e])) {\n        encode = encode[0];\n        out.encode = null; // consume targeted encode directive\n      } else {\n        return pulse.StopPropagation;\n      }\n    }\n\n    // marshall encoder functions\n    var reenter = encode === 'enter',\n        update = encoders.update || falsy,\n        enter = encoders.enter || falsy,\n        exit = encoders.exit || falsy,\n        set = (encode && !reenter ? encoders[encode] : update) || falsy;\n\n    if (pulse.changed(pulse.ADD)) {\n      pulse.visit(pulse.ADD, t => { enter(t, _); update(t, _); });\n      out.modifies(enter.output);\n      out.modifies(update.output);\n      if (set !== falsy && set !== update) {\n        pulse.visit(pulse.ADD, t => { set(t, _); });\n        out.modifies(set.output);\n      }\n    }\n\n    if (pulse.changed(pulse.REM) && exit !== falsy) {\n      pulse.visit(pulse.REM, t => { exit(t, _); });\n      out.modifies(exit.output);\n    }\n\n    if (reenter || set !== falsy) {\n      const flag = pulse.MOD | (_.modified() ? pulse.REFLOW : 0);\n      if (reenter) {\n        pulse.visit(flag, t => {\n          const mod = enter(t, _) || fmod;\n          if (set(t, _) || mod) out.mod.push(t);\n        });\n        if (out.mod.length) out.modifies(enter.output);\n      } else {\n        pulse.visit(flag, t => {\n          if (set(t, _) || fmod) out.mod.push(t);\n        });\n      }\n      if (out.mod.length) out.modifies(set.output);\n    }\n\n    return out.changed() ? out : pulse.StopPropagation;\n  }\n});\n","import {Transform, ingest} from 'vega-dataflow';\nimport {\n  GradientLegend, SymbolLegend,\n  labelFormat, labelFraction, labelValues,\n  scaleFraction, tickCount\n} from 'vega-scale';\nimport {constant, inherits, isFunction, peek} from 'vega-util';\n\n/**\n * Generates legend entries for visualizing a scale.\n * @constructor\n * @param {object} params - The parameters for this operator.\n * @param {Scale} params.scale - The scale to generate items for.\n * @param {*} [params.count=5] - The approximate number of items, or\n *   desired tick interval, to use.\n * @param {*} [params.limit] - The maximum number of entries to\n *   include in a symbol legend.\n * @param {Array<*>} [params.values] - The exact tick values to use.\n *   These must be legal domain values for the provided scale.\n *   If provided, the count argument is ignored.\n * @param {string} [params.formatSpecifier] - A format specifier\n *   to use in conjunction with scale.tickFormat. Legal values are\n *   any valid D3 format specifier string.\n * @param {function(*):string} [params.format] - The format function to use.\n *   If provided, the formatSpecifier argument is ignored.\n */\nexport default function LegendEntries(params) {\n  Transform.call(this, [], params);\n}\n\ninherits(LegendEntries, Transform, {\n  transform(_, pulse) {\n    if (this.value != null && !_.modified()) {\n      return pulse.StopPropagation;\n    }\n\n    var locale = pulse.dataflow.locale(),\n        out = pulse.fork(pulse.NO_SOURCE | pulse.NO_FIELDS),\n        items = this.value,\n        type  = _.type || SymbolLegend,\n        scale = _.scale,\n        limit = +_.limit,\n        count = tickCount(scale, _.count == null ? 5 : _.count, _.minstep),\n        lskip = !!_.values || type === SymbolLegend,\n        format = _.format || labelFormat(locale, scale, count, type, _.formatSpecifier, _.formatType, lskip),\n        values = _.values || labelValues(scale, count),\n        domain, fraction, size, offset, ellipsis;\n\n    if (items) out.rem = items;\n\n    if (type === SymbolLegend) {\n      if (limit && values.length > limit) {\n        pulse.dataflow.warn('Symbol legend count exceeds limit, filtering items.');\n        items = values.slice(0, limit - 1);\n        ellipsis = true;\n      } else {\n        items = values;\n      }\n\n      if (isFunction(size = _.size)) {\n        // if first value maps to size zero, remove from list (vega#717)\n        if (!_.values && scale(items[0]) === 0) {\n          items = items.slice(1);\n        }\n        // compute size offset for legend entries\n        offset = items.reduce((max, value) => Math.max(max, size(value, _)), 0);\n      } else {\n        size = constant(offset = size || 8);\n      }\n\n      items = items.map((value, index) =>\n        ingest({\n          index:  index,\n          label:  format(value, index, items),\n          value:  value,\n          offset: offset,\n          size:   size(value, _)\n        })\n      );\n\n      if (ellipsis) {\n        ellipsis = values[items.length];\n        items.push(ingest({\n          index:    items.length,\n          label:    `\\u2026${values.length-items.length} entries`,\n          value:    ellipsis,\n          offset:   offset,\n          size:     size(ellipsis, _)\n        }));\n      }\n    }\n\n    else if (type === GradientLegend) {\n      domain = scale.domain(),\n      fraction = scaleFraction(scale, domain[0], peek(domain));\n\n      // if automatic label generation produces 2 or fewer values,\n      // use the domain end points instead (fixes vega/vega#1364)\n      if (values.length < 3 && !_.values && domain[0] !== peek(domain)) {\n        values = [domain[0], peek(domain)];\n      }\n\n      items = values.map((value, index) =>\n        ingest({\n          index: index,\n          label: format(value, index, values),\n          value: value,\n          perc:  fraction(value)\n        })\n      );\n    }\n\n    else {\n      size = values.length - 1;\n      fraction = labelFraction(scale);\n\n      items = values.map((value, index) =>\n        ingest({\n          index: index,\n          label: format(value, index, values),\n          value: value,\n          perc:  index ? fraction(value) : 0,\n          perc2: index === size ? 1 : fraction(values[index+1])\n        })\n      );\n    }\n\n    out.source = items;\n    out.add = items;\n    this.value = items;\n\n    return out;\n  }\n});\n","import {Transform} from 'vega-dataflow';\nimport {error, fastmap, inherits} from 'vega-util';\n\nconst sourceX = t => t.source.x;\nconst sourceY = t => t.source.y;\nconst targetX = t => t.target.x;\nconst targetY = t => t.target.y;\n\n /**\n  * Layout paths linking source and target elements.\n  * @constructor\n  * @param {object} params - The parameters for this operator.\n  */\nexport default function LinkPath(params) {\n  Transform.call(this, {}, params);\n}\n\nLinkPath.Definition = {\n  'type': 'LinkPath',\n  'metadata': {'modifies': true},\n  'params': [\n    { 'name': 'sourceX', 'type': 'field', 'default': 'source.x' },\n    { 'name': 'sourceY', 'type': 'field', 'default': 'source.y' },\n    { 'name': 'targetX', 'type': 'field', 'default': 'target.x' },\n    { 'name': 'targetY', 'type': 'field', 'default': 'target.y' },\n    { 'name': 'orient', 'type': 'enum', 'default': 'vertical',\n      'values': ['horizontal', 'vertical', 'radial'] },\n    { 'name': 'shape', 'type': 'enum', 'default': 'line',\n      'values': ['line', 'arc', 'curve', 'diagonal', 'orthogonal'] },\n    { 'name': 'require', 'type': 'signal' },\n    { 'name': 'as', 'type': 'string', 'default': 'path' }\n  ]\n};\n\ninherits(LinkPath, Transform, {\n  transform(_, pulse) {\n    var sx = _.sourceX || sourceX,\n        sy = _.sourceY || sourceY,\n        tx = _.targetX || targetX,\n        ty = _.targetY || targetY,\n        as = _.as || 'path',\n        orient = _.orient || 'vertical',\n        shape = _.shape || 'line',\n        path = Paths.get(shape + '-' + orient) || Paths.get(shape);\n\n    if (!path) {\n      error('LinkPath unsupported type: ' + _.shape\n        + (_.orient ? '-' + _.orient : ''));\n    }\n\n    pulse.visit(pulse.SOURCE, t => {\n      t[as] = path(sx(t), sy(t), tx(t), ty(t));\n    });\n\n    return pulse.reflow(_.modified()).modifies(as);\n  }\n});\n\nconst line = (sx, sy, tx, ty) =>\n  'M' + sx + ',' + sy +\n  'L' + tx + ',' + ty;\n\nconst lineR= (sa, sr, ta, tr) => line(\n  sr * Math.cos(sa), sr * Math.sin(sa),\n  tr * Math.cos(ta), tr * Math.sin(ta)\n);\n\nconst arc = (sx, sy, tx, ty) => {\n  var dx = tx - sx,\n      dy = ty - sy,\n      rr = Math.hypot(dx, dy) / 2,\n      ra = 180 * Math.atan2(dy, dx) / Math.PI;\n  return 'M' + sx + ',' + sy +\n         'A' + rr + ',' + rr +\n         ' ' + ra + ' 0 1' +\n         ' ' + tx + ',' + ty;\n};\n\nconst arcR = (sa, sr, ta, tr) => arc(\n  sr * Math.cos(sa), sr * Math.sin(sa),\n  tr * Math.cos(ta), tr * Math.sin(ta)\n);\n\nconst curve = (sx, sy, tx, ty) => {\n  const dx = tx - sx,\n        dy = ty - sy,\n        ix = 0.2 * (dx + dy),\n        iy = 0.2 * (dy - dx);\n  return 'M' + sx + ',' + sy +\n         'C' + (sx+ix) + ',' + (sy+iy) +\n         ' ' + (tx+iy) + ',' + (ty-ix) +\n         ' ' + tx + ',' + ty;\n};\n\nconst curveR = (sa, sr, ta, tr) => curve(\n  sr * Math.cos(sa), sr * Math.sin(sa),\n  tr * Math.cos(ta), tr * Math.sin(ta)\n);\n\nconst orthoX = (sx, sy, tx, ty) =>\n  'M' + sx + ',' + sy +\n  'V' + ty + 'H' + tx;\n\nconst orthoY = (sx, sy, tx, ty) =>\n  'M' + sx + ',' + sy +\n  'H' + tx + 'V' + ty;\n\nconst orthoR = (sa, sr, ta, tr) => {\n  const sc = Math.cos(sa),\n        ss = Math.sin(sa),\n        tc = Math.cos(ta),\n        ts = Math.sin(ta),\n        sf = Math.abs(ta - sa) > Math.PI ? ta <= sa : ta > sa;\n  return 'M' + (sr*sc) + ',' + (sr*ss) +\n         'A' + sr + ',' + sr + ' 0 0,' + (sf?1:0) +\n         ' ' + (sr*tc) + ',' + (sr*ts) +\n         'L' + (tr*tc) + ',' + (tr*ts);\n};\n\nconst diagonalX = (sx, sy, tx, ty) => {\n  const m = (sx + tx) / 2;\n  return 'M' + sx + ',' + sy +\n         'C' + m  + ',' + sy +\n         ' ' + m  + ',' + ty +\n         ' ' + tx + ',' + ty;\n};\n\nconst diagonalY = (sx, sy, tx, ty) => {\n  const m = (sy + ty) / 2;\n  return 'M' + sx + ',' + sy +\n         'C' + sx + ',' + m +\n         ' ' + tx + ',' + m +\n         ' ' + tx + ',' + ty;\n};\n\nconst diagonalR = (sa, sr, ta, tr) => {\n  const sc = Math.cos(sa),\n        ss = Math.sin(sa),\n        tc = Math.cos(ta),\n        ts = Math.sin(ta),\n        mr = (sr + tr) / 2;\n  return 'M' + (sr*sc) + ',' + (sr*ss) +\n         'C' + (mr*sc) + ',' + (mr*ss) +\n         ' ' + (mr*tc) + ',' + (mr*ts) +\n         ' ' + (tr*tc) + ',' + (tr*ts);\n};\n\nconst Paths = fastmap({\n  'line': line,\n  'line-radial': lineR,\n  'arc': arc,\n  'arc-radial': arcR,\n  'curve': curve,\n  'curve-radial': curveR,\n  'orthogonal-horizontal': orthoX,\n  'orthogonal-vertical': orthoY,\n  'orthogonal-radial': orthoR,\n  'diagonal-horizontal': diagonalX,\n  'diagonal-vertical': diagonalY,\n  'diagonal-radial': diagonalR\n});\n","export default function range(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n","import {Transform} from 'vega-dataflow';\nimport {inherits, one} from 'vega-util';\nimport {range, sum} from 'd3-array';\n\n/**\n * Pie and donut chart layout.\n * @constructor\n * @param {object} params - The parameters for this operator.\n * @param {function(object): *} params.field - The value field to size pie segments.\n * @param {number} [params.startAngle=0] - The start angle (in radians) of the layout.\n * @param {number} [params.endAngle=2Ï€] - The end angle (in radians) of the layout.\n * @param {boolean} [params.sort] - Boolean flag for sorting sectors by value.\n */\nexport default function Pie(params) {\n  Transform.call(this, null, params);\n}\n\nPie.Definition = {\n  'type': 'Pie',\n  'metadata': {'modifies': true},\n  'params': [\n    { 'name': 'field', 'type': 'field' },\n    { 'name': 'startAngle', 'type': 'number', 'default': 0 },\n    { 'name': 'endAngle', 'type': 'number', 'default': 6.283185307179586 },\n    { 'name': 'sort', 'type': 'boolean', 'default': false },\n    { 'name': 'as', 'type': 'string', 'array': true, 'length': 2, 'default': ['startAngle', 'endAngle'] }\n  ]\n};\n\ninherits(Pie, Transform, {\n  transform(_, pulse) {\n    var as = _.as || ['startAngle', 'endAngle'],\n        startAngle = as[0],\n        endAngle = as[1],\n        field = _.field || one,\n        start = _.startAngle || 0,\n        stop = _.endAngle != null ? _.endAngle : 2 * Math.PI,\n        data = pulse.source,\n        values = data.map(field),\n        n = values.length,\n        a = start,\n        k = (stop - start) / sum(values),\n        index = range(n),\n        i, t, v;\n\n    if (_.sort) {\n      index.sort((a, b) => values[a] - values[b]);\n    }\n\n    for (i=0; i<n; ++i) {\n      v = values[index[i]];\n      t = data[index[i]];\n      t[startAngle] = a;\n      t[endAngle] = (a += v * k);\n    }\n\n    this.value = values;\n    return pulse.reflow(_.modified()).modifies(as);\n  }\n});\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default function sum(values, valueof) {\n  let sum = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value = +value) {\n        sum += value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if (value = +valueof(value, ++index, values)) {\n        sum += value;\n      }\n    }\n  }\n  return sum;\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","import {Transform} from 'vega-dataflow';\nimport {\n  error, inherits, isArray, isFunction, isString, peek, stringValue,\n  toSet, zoomLinear, zoomLog, zoomPow, zoomSymlog\n} from 'vega-util';\n\nimport {\n  Band,\n  BinOrdinal,\n  Diverging,\n  Linear,\n  Log,\n  Ordinal,\n  Point,\n  Pow,\n  Quantile,\n  Quantize,\n  Sequential,\n  Sqrt,\n  Symlog,\n  Threshold,\n  Time,\n  UTC,\n  bandSpace,\n  interpolate as getInterpolate,\n  scale as getScale,\n  scheme as getScheme,\n  interpolateColors,\n  interpolateRange,\n  isContinuous,\n  isInterpolating,\n  isLogarithmic,\n  quantizeInterpolator,\n  scaleImplicit,\n  tickCount\n} from 'vega-scale';\n\nimport {range as sequence} from 'd3-array';\n\nimport {\n  interpolate,\n  interpolateRound\n} from 'd3-interpolate';\n\nconst DEFAULT_COUNT = 5;\n\nfunction includeZero(scale) {\n  const type = scale.type;\n  return !scale.bins && (\n    type === Linear || type === Pow || type === Sqrt\n  );\n}\n\nfunction includePad(type) {\n  return isContinuous(type) && type !== Sequential;\n}\n\nconst SKIP = toSet([\n  'set', 'modified', 'clear', 'type', 'scheme', 'schemeExtent', 'schemeCount',\n  'domain', 'domainMin', 'domainMid', 'domainMax',\n  'domainRaw', 'domainImplicit', 'nice', 'zero', 'bins',\n  'range', 'rangeStep', 'round', 'reverse', 'interpolate', 'interpolateGamma'\n]);\n\n/**\n * Maintains a scale function mapping data values to visual channels.\n * @constructor\n * @param {object} params - The parameters for this operator.\n */\nexport default function Scale(params) {\n  Transform.call(this, null, params);\n  this.modified(true); // always treat as modified\n}\n\ninherits(Scale, Transform, {\n  transform(_, pulse) {\n    var df = pulse.dataflow,\n        scale = this.value,\n        key = scaleKey(_);\n\n    if (!scale || key !== scale.type) {\n      this.value = scale = getScale(key)();\n    }\n\n    for (key in _) if (!SKIP[key]) {\n      // padding is a scale property for band/point but not others\n      if (key === 'padding' && includePad(scale.type)) continue;\n      // invoke scale property setter, raise warning if not found\n      isFunction(scale[key])\n        ? scale[key](_[key])\n        : df.warn('Unsupported scale property: ' + key);\n    }\n\n    configureRange(scale, _,\n      configureBins(scale, _, configureDomain(scale, _, df))\n    );\n\n    return pulse.fork(pulse.NO_SOURCE | pulse.NO_FIELDS);\n  }\n});\n\nfunction scaleKey(_) {\n  var t = _.type, d = '', n;\n\n  // backwards compatibility pre Vega 5.\n  if (t === Sequential) return Sequential + '-' + Linear;\n\n  if (isContinuousColor(_)) {\n    n = _.rawDomain ? _.rawDomain.length\n      : _.domain ? _.domain.length + +(_.domainMid != null)\n      : 0;\n    d = n === 2 ? Sequential + '-'\n      : n === 3 ? Diverging + '-'\n      : '';\n  }\n\n  return ((d + t) || Linear).toLowerCase();\n}\n\nfunction isContinuousColor(_) {\n  const t = _.type;\n  return isContinuous(t) && t !== Time && t !== UTC && (\n    _.scheme || _.range && _.range.length && _.range.every(isString)\n  );\n}\n\nfunction configureDomain(scale, _, df) {\n  // check raw domain, if provided use that and exit early\n  const raw = rawDomain(scale, _.domainRaw, df);\n  if (raw > -1) return raw;\n\n  var domain = _.domain,\n      type = scale.type,\n      zero = _.zero || (_.zero === undefined && includeZero(scale)),\n      n, mid;\n\n  if (!domain) return 0;\n\n  // adjust continuous domain for minimum pixel padding\n  if (includePad(type) && _.padding && domain[0] !== peek(domain)) {\n    domain = padDomain(type, domain, _.range, _.padding, _.exponent, _.constant);\n  }\n\n  // adjust domain based on zero, min, max settings\n  if (zero || _.domainMin != null || _.domainMax != null || _.domainMid != null) {\n    n = ((domain = domain.slice()).length - 1) || 1;\n    if (zero) {\n      if (domain[0] > 0) domain[0] = 0;\n      if (domain[n] < 0) domain[n] = 0;\n    }\n    if (_.domainMin != null) domain[0] = _.domainMin;\n    if (_.domainMax != null) domain[n] = _.domainMax;\n\n    if (_.domainMid != null) {\n      mid = _.domainMid;\n      const i = mid > domain[n] ? n + 1 : mid < domain[0] ? 0 : n;\n      if (i !== n) df.warn('Scale domainMid exceeds domain min or max.', mid);\n      domain.splice(i, 0, mid);\n    }\n  }\n\n  // set the scale domain\n  scale.domain(domainCheck(type, domain, df));\n\n  // if ordinal scale domain is defined, prevent implicit\n  // domain construction as side-effect of scale lookup\n  if (type === Ordinal) {\n    scale.unknown(_.domainImplicit ? scaleImplicit : undefined);\n  }\n\n  // perform 'nice' adjustment as requested\n  if (_.nice && scale.nice) {\n    scale.nice((_.nice !== true && tickCount(scale, _.nice)) || null);\n  }\n\n  // return the cardinality of the domain\n  return domain.length;\n}\n\nfunction rawDomain(scale, raw, df) {\n  if (raw) {\n    scale.domain(domainCheck(scale.type, raw, df));\n    return raw.length;\n  } else {\n    return -1;\n  }\n}\n\nfunction padDomain(type, domain, range, pad, exponent, constant) {\n  var span = Math.abs(peek(range) - range[0]),\n      frac = span / (span - 2 * pad),\n      d = type === Log    ? zoomLog(domain, null, frac)\n        : type === Sqrt   ? zoomPow(domain, null, frac, 0.5)\n        : type === Pow    ? zoomPow(domain, null, frac, exponent || 1)\n        : type === Symlog ? zoomSymlog(domain, null, frac, constant || 1)\n        : zoomLinear(domain, null, frac);\n\n  domain = domain.slice();\n  domain[0] = d[0];\n  domain[domain.length-1] = d[1];\n  return domain;\n}\n\nfunction domainCheck(type, domain, df) {\n  if (isLogarithmic(type)) {\n    // sum signs of domain values\n    // if all pos or all neg, abs(sum) === domain.length\n    var s = Math.abs(domain.reduce((s, v) => s + (v < 0 ? -1 : v > 0 ? 1 : 0), 0));\n\n    if (s !== domain.length) {\n      df.warn('Log scale domain includes zero: ' + stringValue(domain));\n    }\n  }\n  return domain;\n}\n\nfunction configureBins(scale, _, count) {\n  let bins = _.bins;\n\n  if (bins && !isArray(bins)) {\n    // generate bin boundary array\n    const domain = scale.domain(),\n          lo = domain[0],\n          hi = peek(domain),\n          step = bins.step;\n\n    let start = bins.start == null ? lo : bins.start,\n        stop = bins.stop == null ? hi : bins.stop;\n\n    if (!step) error('Scale bins parameter missing step property.');\n    if (start < lo) start = step * Math.ceil(lo / step);\n    if (stop > hi) stop = step * Math.floor(hi / step);\n    bins = sequence(start, stop + step / 2, step);\n  }\n\n  if (bins) {\n    // assign bin boundaries to scale instance\n    scale.bins = bins;\n  } else if (scale.bins) {\n    // no current bins, remove bins if previously set\n    delete scale.bins;\n  }\n\n  // special handling for bin-ordinal scales\n  if (scale.type === BinOrdinal) {\n    if (!bins) {\n      // the domain specifies the bins\n      scale.bins = scale.domain();\n    } else if (!_.domain && !_.domainRaw) {\n      // the bins specify the domain\n      scale.domain(bins);\n      count = bins.length;\n    }\n  }\n\n  // return domain cardinality\n  return count;\n}\n\nfunction configureRange(scale, _, count) {\n  var type = scale.type,\n      round = _.round || false,\n      range = _.range;\n\n  // if range step specified, calculate full range extent\n  if (_.rangeStep != null) {\n    range = configureRangeStep(type, _, count);\n  }\n\n  // else if a range scheme is defined, use that\n  else if (_.scheme) {\n    range = configureScheme(type, _, count);\n    if (isFunction(range)) {\n      if (scale.interpolator) {\n        return scale.interpolator(range);\n      } else {\n        error(`Scale type ${type} does not support interpolating color schemes.`);\n      }\n    }\n  }\n\n  // given a range array for an interpolating scale, convert to interpolator\n  if (range && isInterpolating(type)) {\n    return scale.interpolator(\n      interpolateColors(flip(range, _.reverse), _.interpolate, _.interpolateGamma)\n    );\n  }\n\n  // configure rounding / interpolation\n  if (range && _.interpolate && scale.interpolate) {\n    scale.interpolate(getInterpolate(_.interpolate, _.interpolateGamma));\n  } else if (isFunction(scale.round)) {\n    scale.round(round);\n  } else if (isFunction(scale.rangeRound)) {\n    scale.interpolate(round ? interpolateRound : interpolate);\n  }\n\n  if (range) scale.range(flip(range, _.reverse));\n}\n\nfunction configureRangeStep(type, _, count) {\n  if (type !== Band && type !== Point) {\n    error('Only band and point scales support rangeStep.');\n  }\n\n  // calculate full range based on requested step size and padding\n  var outer = (_.paddingOuter != null ? _.paddingOuter : _.padding) || 0,\n      inner = type === Point ? 1\n            : ((_.paddingInner != null ? _.paddingInner : _.padding) || 0);\n  return [0, _.rangeStep * bandSpace(count, inner, outer)];\n}\n\nfunction configureScheme(type, _, count) {\n  var extent = _.schemeExtent,\n      name, scheme;\n\n  if (isArray(_.scheme)) {\n    scheme = interpolateColors(_.scheme, _.interpolate, _.interpolateGamma);\n  } else {\n    name = _.scheme.toLowerCase();\n    scheme = getScheme(name);\n    if (!scheme) error(`Unrecognized scheme name: ${_.scheme}`);\n  }\n\n  // determine size for potential discrete range\n  count = (type === Threshold) ? count + 1\n    : (type === BinOrdinal) ? count - 1\n    : (type === Quantile || type === Quantize) ? (+_.schemeCount || DEFAULT_COUNT)\n    : count;\n\n  // adjust and/or quantize scheme as appropriate\n  return isInterpolating(type) ? adjustScheme(scheme, extent, _.reverse)\n    : isFunction(scheme) ? quantizeInterpolator(adjustScheme(scheme, extent), count)\n    : type === Ordinal ? scheme : scheme.slice(0, count);\n}\n\nfunction adjustScheme(scheme, extent, reverse) {\n  return (isFunction(scheme) && (extent || reverse))\n    ? interpolateRange(scheme, flip(extent || [0, 1], reverse))\n    : scheme;\n}\n\nfunction flip(array, reverse) {\n  return reverse ? array.slice().reverse() : array;\n}\n\n","import {Transform, stableCompare} from 'vega-dataflow';\nimport {inherits} from 'vega-util';\n\n/**\n * Sorts scenegraph items in the pulse source array.\n * @constructor\n * @param {object} params - The parameters for this operator.\n * @param {function(*,*): number} [params.sort] - A comparator\n *   function for sorting tuples.\n */\nexport default function SortItems(params) {\n  Transform.call(this, null, params);\n}\n\ninherits(SortItems, Transform, {\n  transform(_, pulse) {\n    const mod = _.modified('sort')\n          || pulse.changed(pulse.ADD)\n          || pulse.modified(_.sort.fields)\n          || pulse.modified('datum');\n\n    if (mod) pulse.source.sort(stableCompare(_.sort));\n\n    this.modified(mod);\n    return pulse;\n  }\n});\n","import {Transform, stableCompare} from 'vega-dataflow';\nimport {inherits, one} from 'vega-util';\n\nconst Zero = 'zero',\n      Center = 'center',\n      Normalize = 'normalize',\n      DefOutput = ['y0', 'y1'];\n\n/**\n * Stack layout for visualization elements.\n * @constructor\n * @param {object} params - The parameters for this operator.\n * @param {function(object): *} params.field - The value field to stack.\n * @param {Array<function(object): *>} [params.groupby] - An array of accessors to groupby.\n * @param {function(object,object): number} [params.sort] - A comparator for stack sorting.\n * @param {string} [offset='zero'] - Stack baseline offset. One of 'zero', 'center', 'normalize'.\n */\nexport default function Stack(params) {\n  Transform.call(this, null, params);\n}\n\nStack.Definition = {\n  'type': 'Stack',\n  'metadata': {'modifies': true},\n  'params': [\n    { 'name': 'field', 'type': 'field' },\n    { 'name': 'groupby', 'type': 'field', 'array': true },\n    { 'name': 'sort', 'type': 'compare' },\n    { 'name': 'offset', 'type': 'enum', 'default': Zero, 'values': [Zero, Center, Normalize] },\n    { 'name': 'as', 'type': 'string', 'array': true, 'length': 2, 'default': DefOutput }\n  ]\n};\n\ninherits(Stack, Transform, {\n  transform(_, pulse) {\n    var as = _.as || DefOutput,\n        y0 = as[0],\n        y1 = as[1],\n        sort = stableCompare(_.sort),\n        field = _.field || one,\n        stack = _.offset === Center ? stackCenter\n              : _.offset === Normalize ? stackNormalize\n              : stackZero,\n        groups, i, n, max;\n\n    // partition, sum, and sort the stack groups\n    groups = partition(pulse.source, _.groupby, sort, field);\n\n    // compute stack layouts per group\n    for (i=0, n=groups.length, max=groups.max; i<n; ++i) {\n      stack(groups[i], max, field, y0, y1);\n    }\n\n    return pulse.reflow(_.modified()).modifies(as);\n  }\n});\n\nfunction stackCenter(group, max, field, y0, y1) {\n  var last = (max - group.sum) / 2,\n      m = group.length,\n      j = 0, t;\n\n  for (; j<m; ++j) {\n    t = group[j];\n    t[y0] = last;\n    t[y1] = (last += Math.abs(field(t)));\n  }\n}\n\nfunction stackNormalize(group, max, field, y0, y1) {\n  var scale = 1 / group.sum,\n      last = 0,\n      m = group.length,\n      j = 0, v = 0, t;\n\n  for (; j<m; ++j) {\n    t = group[j];\n    t[y0] = last;\n    t[y1] = last = scale * (v += Math.abs(field(t)));\n  }\n}\n\nfunction stackZero(group, max, field, y0, y1) {\n  var lastPos = 0,\n      lastNeg = 0,\n      m = group.length,\n      j = 0, v, t;\n\n  for (; j<m; ++j) {\n    t = group[j];\n    v = +field(t);\n    if (v < 0) {\n      t[y0] = lastNeg;\n      t[y1] = (lastNeg += v);\n    } else {\n      t[y0] = lastPos;\n      t[y1] = (lastPos += v);\n    }\n  }\n}\n\nfunction partition(data, groupby, sort, field) {\n  var groups = [],\n      get = f => f(t),\n      map, i, n, m, t, k, g, s, max;\n\n  // partition data points into stack groups\n  if (groupby == null) {\n    groups.push(data.slice());\n  } else {\n    for (map={}, i=0, n=data.length; i<n; ++i) {\n      t = data[i];\n      k = groupby.map(get);\n      g = map[k];\n      if (!g) {\n        map[k] = (g = []);\n        groups.push(g);\n      }\n      g.push(t);\n    }\n  }\n\n  // compute sums of groups, sort groups as needed\n  for (k=0, max=0, m=groups.length; k<m; ++k) {\n    g = groups[k];\n    for (i=0, s=0, n=g.length; i<n; ++i) {\n      s += Math.abs(field(g[i]));\n    }\n    g.sum = s;\n    if (s > max) max = s;\n    if (sort) g.sort(sort);\n  }\n  groups.max = max;\n\n  return groups;\n}\n"],"names":["AxisTicks","params","Transform","call","this","DataJoin","defaultItemCreate","ingest","Encode","LegendEntries","inherits","transform","_","pulse","value","modified","StopPropagation","locale","dataflow","out","fork","NO_SOURCE","NO_FIELDS","ticks","scale","tally","count","values","length","tickCount","minstep","format","tickFormat","formatSpecifier","formatType","validTicks","tickValues","rem","map","i","index","label","extra","push","source","add","df","item","key","tupleid","isArray","encode","error","addAll","fastmap","test","t","exit","lookup","get","newMap","visit","ADD","k","x","empty","mod","set","datum","MOD","REM","changed","ADD_MOD","modifies","clean","cleanThreshold","runAfter","ADD_REM","fmod","encoders","every","e","reenter","update","falsy","enter","output","flag","REFLOW","domain","fraction","size","offset","ellipsis","items","type","SymbolLegend","limit","lskip","labelFormat","labelValues","warn","slice","isFunction","reduce","max","Math","constant","GradientLegend","scaleFraction","peek","perc","labelFraction","perc2","sourceX","sourceY","y","targetX","target","targetY","LinkPath","Definition","metadata","name","default","sx","sy","tx","ty","as","orient","shape","path","Paths","SOURCE","reflow","line","arc","dx","dy","rr","hypot","atan2","PI","curve","ix","iy","lineR","sa","sr","ta","tr","cos","sin","arcR","curveR","orthoX","orthoY","orthoR","sc","ss","tc","ts","abs","diagonalX","m","diagonalY","diagonalR","mr","range","start","stop","step","n","arguments","ceil","Array","Pie","define","constructor","factory","prototype","extend","parent","definition","Object","create","Color","array","v","startAngle","endAngle","field","one","data","a","valueof","sum","undefined","sort","b","darker","brighter","reI","reN","reP","reHex","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","color","l","trim","toLowerCase","exec","parseInt","rgbn","Rgb","rgba","hsla","hasOwnProperty","NaN","r","g","opacity","o","rgb_formatHex","hex","rgb_formatRgb","clampa","clampi","isNaN","min","round","toString","h","s","Hsl","hslConvert","clamph","clampt","hsl2rgb","m1","m2","copy","channels","assign","displayable","formatHex8","formatHsl","pow","clamp","gamma","nogamma","exponential","d","linear","rgbGamma","end","colorRgb","numberArray","c","genericArray","nb","na","date","Date","setTime","number","object","reA","reB","string","am","bm","bs","bi","lastIndex","q","zero","join","interpolate","ArrayBuffer","isView","DataView","valueOf","interpolateRound","DEFAULT_COUNT","includePad","isContinuous","Sequential","SKIP","toSet","Scale","domainCheck","isLogarithmic","stringValue","adjustScheme","scheme","extent","reverse","interpolateRange","flip","SortItems","Linear","Time","UTC","isString","isContinuousColor","rawDomain","domainMid","Diverging","scaleKey","getScale","rangeStep","Band","Point","outer","paddingOuter","padding","inner","paddingInner","bandSpace","configureRangeStep","schemeExtent","interpolateColors","interpolateGamma","getScheme","Threshold","BinOrdinal","Quantile","Quantize","schemeCount","isInterpolating","quantizeInterpolator","Ordinal","configureScheme","interpolator","getInterpolate","rangeRound","configureRange","bins","lo","hi","floor","sequence","domainRaw","configureBins","raw","mid","Pow","Sqrt","includeZero","pad","exponent","span","frac","Log","zoomLog","zoomPow","Symlog","zoomSymlog","zoomLinear","padDomain","domainMin","domainMax","splice","unknown","domainImplicit","scaleImplicit","nice","configureDomain","fields","stableCompare","Zero","Center","Normalize","DefOutput","Stack","stackCenter","group","y0","y1","last","j","stackNormalize","stackZero","lastPos","lastNeg","groups","stack","groupby","f","partition"],"mappings":"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","x_google_ignoreList":[5,7,8,9,10,11,12,13,14,15,16,17,18,19,20]}